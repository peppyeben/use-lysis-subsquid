module.exports = class Data1725318796522 {
    name = 'Data1725318796522'

    async up(db) {
        await db.query(`CREATE TABLE "sale" ("id" character varying NOT NULL, "buyer" text NOT NULL, "seller" text NOT NULL, "token_address" text NOT NULL, "token_id" numeric NOT NULL, "sale_price" numeric NOT NULL, "payment_coin" text NOT NULL, "timestamp" numeric NOT NULL, "is_erc721" boolean NOT NULL, CONSTRAINT "PK_d03891c457cbcd22974732b5de2" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_52a5d0b75a305496a326d4f2f6" ON "sale" ("buyer") `)
        await db.query(`CREATE INDEX "IDX_3cd3366d2c0c6e1484ebb3520b" ON "sale" ("seller") `)
        await db.query(`CREATE INDEX "IDX_ec4db928fcf0a1bc296f0a32ac" ON "sale" ("token_address") `)
        await db.query(`CREATE INDEX "IDX_53aae73a92bcdefd80d4bb94e7" ON "sale" ("token_id") `)
        await db.query(`CREATE INDEX "IDX_666b9883b1cf1386733ba5f47c" ON "sale" ("payment_coin") `)
        await db.query(`CREATE TABLE "collection" ("id" character varying NOT NULL, "address" text NOT NULL, "name" text, "total_sales" numeric NOT NULL, "total_volume" numeric NOT NULL, "floor_price" numeric, CONSTRAINT "PK_ad3f485bbc99d875491f44d7c85" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_8249233279860048fa806e1cc0" ON "collection" ("address") `)
        await db.query(`CREATE TABLE "banned_account" ("id" character varying NOT NULL, "account" text NOT NULL, "token_address" text NOT NULL, "ban_timestamp" numeric NOT NULL, "is_currently_banned" boolean NOT NULL, CONSTRAINT "PK_f060b331673dadb3903aa9b8dea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_dc25a2206fe8bef78d55f5e916" ON "banned_account" ("account") `)
        await db.query(`CREATE INDEX "IDX_31b1d0a30406351fb1d04cd7b9" ON "banned_account" ("token_address") `)
        await db.query(`CREATE TABLE "ban_event" ("id" character varying NOT NULL, "account" text NOT NULL, "token_address" text NOT NULL, "timestamp" numeric NOT NULL, "event_type" text NOT NULL, CONSTRAINT "PK_7c7db4e98f81b43f2b72368713f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_6e6a1666cc205330354c303ee3" ON "ban_event" ("account") `)
        await db.query(`CREATE INDEX "IDX_099cf17570e53401f1202d4d0c" ON "ban_event" ("token_address") `)
        await db.query(`CREATE TABLE "payment_method_whitelist" ("id" character varying NOT NULL, "whitelist_id" numeric NOT NULL, "owner" text NOT NULL, "name" text NOT NULL, "payment_methods" text array NOT NULL, CONSTRAINT "PK_5c447ab334ef9d67a1ac399a945" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_559cd9f7c957e8ce940fc4bffa" ON "payment_method_whitelist" ("whitelist_id") `)
        await db.query(`CREATE INDEX "IDX_7e895363b4250c53c5e80731de" ON "payment_method_whitelist" ("owner") `)
        await db.query(`CREATE TABLE "payment_method_event" ("id" character varying NOT NULL, "whitelist_id" numeric NOT NULL, "payment_method" text NOT NULL, "timestamp" numeric NOT NULL, "event_type" text NOT NULL, CONSTRAINT "PK_f0fc5e5f0bb1cee471a4e3e1556" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_a1e56452d347c5949e794a1771" ON "payment_method_event" ("whitelist_id") `)
        await db.query(`CREATE INDEX "IDX_bd7e8020f670aafc5f73eb6afb" ON "payment_method_event" ("payment_method") `)
        await db.query(`CREATE TABLE "collection_pricing" ("id" character varying NOT NULL, "token_address" text NOT NULL, "floor_price" numeric NOT NULL, "ceiling_price" numeric NOT NULL, "last_updated" numeric NOT NULL, CONSTRAINT "PK_dbe83ac2b8d9ea524926f23c31f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_18e67d0466dcb9512eb72243c7" ON "collection_pricing" ("token_address") `)
        await db.query(`CREATE TABLE "token_pricing" ("id" character varying NOT NULL, "token_address" text NOT NULL, "token_id" numeric NOT NULL, "floor_price" numeric NOT NULL, "ceiling_price" numeric NOT NULL, "last_updated" numeric NOT NULL, CONSTRAINT "PK_423acb16bcd662d9ffe6a6874c8" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7721653cbf57f6053ec95e4be7" ON "token_pricing" ("token_address") `)
        await db.query(`CREATE INDEX "IDX_1a55955281302031d696ab85a7" ON "token_pricing" ("token_id") `)
        await db.query(`CREATE TABLE "collection_royalty" ("id" character varying NOT NULL, "token_address" text NOT NULL, "royalty_backfill_numerator" integer NOT NULL, "royalty_backfill_receiver" text NOT NULL, "royalty_bounty_numerator" integer NOT NULL, "exclusive_bounty_receiver" text, "last_updated" numeric NOT NULL, CONSTRAINT "PK_9430f12e54a3c2ddc33aa36bbff" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_37c6e6dd8fcc921877cff8a825" ON "collection_royalty" ("token_address") `)
        await db.query(`CREATE TABLE "trusted_channel" ("id" character varying NOT NULL, "token_address" text NOT NULL, "channel_address" text NOT NULL, "is_currently_trusted" boolean NOT NULL, "last_updated" numeric NOT NULL, CONSTRAINT "PK_15dd775d3173f2d0a82b12d8f12" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_a7a5e9c1a481c215ebd558c86b" ON "trusted_channel" ("token_address") `)
        await db.query(`CREATE INDEX "IDX_04645a2dff5a4e20c21313fb6b" ON "trusted_channel" ("channel_address") `)
        await db.query(`CREATE TABLE "channel_event" ("id" character varying NOT NULL, "token_address" text NOT NULL, "channel_address" text NOT NULL, "timestamp" numeric NOT NULL, "event_type" text NOT NULL, CONSTRAINT "PK_20b2e3b5ffc9e1a34736cd958a7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_87fbfba64b83e40a1ca9191a71" ON "channel_event" ("token_address") `)
        await db.query(`CREATE INDEX "IDX_dfdca62d50cf2eb326804f3f17" ON "channel_event" ("channel_address") `)
        await db.query(`CREATE TABLE "cancellation_event" ("id" character varying NOT NULL, "account" text NOT NULL, "nonce" numeric, "order_digest" text, "timestamp" numeric NOT NULL, "cancellation_type" text NOT NULL, CONSTRAINT "PK_e6251b5faee593fccd4e1741063" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_9a7557c2b285c4c078e0eeecc0" ON "cancellation_event" ("account") `)
        await db.query(`CREATE TABLE "token_standard" ("id" character varying NOT NULL, "token_address" text NOT NULL, "is_erc721" boolean NOT NULL, "total_sales" numeric NOT NULL, "total_volume" numeric NOT NULL, CONSTRAINT "PK_85bfaff0ee0fa8b2124a073ac31" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_0e8d3d41b0edc7e7439206589f" ON "token_standard" ("token_address") `)
        await db.query(`CREATE TABLE "cosigner_event" ("id" character varying NOT NULL, "cosigner_address" text NOT NULL, "destroyed_at" numeric NOT NULL, CONSTRAINT "PK_afe76f0f280e04f448c3b45453e" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_b8624b31514a35bdea18e62ab7" ON "cosigner_event" ("cosigner_address") `)
        await db.query(`CREATE TABLE "collection_payment_settings" ("id" character varying NOT NULL, "token_address" text NOT NULL, "payment_method_whitelist_id" numeric, "constrained_pricing_payment_method" text, "block_trades_from_untrusted_channels" boolean NOT NULL, "block_banned_accounts" boolean NOT NULL, "last_updated" numeric NOT NULL, CONSTRAINT "PK_8611d0a002bcd5db184de19a662" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_6757434d1d5e63eac97bbc7ded" ON "collection_payment_settings" ("token_address") `)
        await db.query(`CREATE TABLE "name_registered_event" ("id" character varying NOT NULL, "name" text NOT NULL, "label" text NOT NULL, "owner" text NOT NULL, "expires" numeric NOT NULL, "timestamp" numeric, CONSTRAINT "PK_ded938a311145daadc3cd652c7e" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e1f6420c2f81f38dec8e9554a0" ON "name_registered_event" ("name") `)
        await db.query(`CREATE INDEX "IDX_496445d29cefe03909a6fd818d" ON "name_registered_event" ("owner") `)
        await db.query(`CREATE TABLE "name_renewed_event" ("id" character varying NOT NULL, "name" text NOT NULL, "label" text NOT NULL, "expires" numeric NOT NULL, "timestamp" numeric, CONSTRAINT "PK_ea7de89c4c47a149eca0e13cbd6" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_789175150c539317f4e324f040" ON "name_renewed_event" ("name") `)
        await db.query(`CREATE TABLE "discount_applied_event" ("id" character varying NOT NULL, "registrant" text NOT NULL, "discount_key" text NOT NULL, CONSTRAINT "PK_156725ad91a2c4c5fa4c6ddc1c7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "eth_payment_processed_event" ("id" character varying NOT NULL, "payee" text NOT NULL, "price" numeric NOT NULL, CONSTRAINT "PK_af6e0fc37da982f98f37ccd2d9b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_ce18881b2f9e29fcd50464baf0" ON "eth_payment_processed_event" ("payee") `)
        await db.query(`CREATE TABLE "discount_details" ("id" character varying NOT NULL, "active" boolean NOT NULL, "discount_validator" text NOT NULL, "key" text NOT NULL, "discount" numeric NOT NULL, CONSTRAINT "PK_1e92abbc919e0fc406946bf94a7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "discount_updated_event" ("id" character varying NOT NULL, "discount_key" text NOT NULL, "details_id" character varying, CONSTRAINT "PK_06fc20611d8f6ba18b13dc8c263" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f548a19cc679afe132bd7be92a" ON "discount_updated_event" ("details_id") `)
        await db.query(`CREATE TABLE "price_oracle_updated_event" ("id" character varying NOT NULL, "new_prices" text NOT NULL, CONSTRAINT "PK_a3777b671a908641140b0a57577" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "reverse_registrar_updated_event" ("id" character varying NOT NULL, "new_reverse_registrar" text NOT NULL, CONSTRAINT "PK_fa3ec8f009bbb93a2965bf019f9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "payment_receiver_updated_event" ("id" character varying NOT NULL, "new_payment_receiver" text NOT NULL, CONSTRAINT "PK_f0cf4931dde2f6a4156b3970571" PRIMARY KEY ("id"))`)
        await db.query(`ALTER TABLE "discount_updated_event" ADD CONSTRAINT "FK_f548a19cc679afe132bd7be92a6" FOREIGN KEY ("details_id") REFERENCES "discount_details"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "sale"`)
        await db.query(`DROP INDEX "public"."IDX_52a5d0b75a305496a326d4f2f6"`)
        await db.query(`DROP INDEX "public"."IDX_3cd3366d2c0c6e1484ebb3520b"`)
        await db.query(`DROP INDEX "public"."IDX_ec4db928fcf0a1bc296f0a32ac"`)
        await db.query(`DROP INDEX "public"."IDX_53aae73a92bcdefd80d4bb94e7"`)
        await db.query(`DROP INDEX "public"."IDX_666b9883b1cf1386733ba5f47c"`)
        await db.query(`DROP TABLE "collection"`)
        await db.query(`DROP INDEX "public"."IDX_8249233279860048fa806e1cc0"`)
        await db.query(`DROP TABLE "banned_account"`)
        await db.query(`DROP INDEX "public"."IDX_dc25a2206fe8bef78d55f5e916"`)
        await db.query(`DROP INDEX "public"."IDX_31b1d0a30406351fb1d04cd7b9"`)
        await db.query(`DROP TABLE "ban_event"`)
        await db.query(`DROP INDEX "public"."IDX_6e6a1666cc205330354c303ee3"`)
        await db.query(`DROP INDEX "public"."IDX_099cf17570e53401f1202d4d0c"`)
        await db.query(`DROP TABLE "payment_method_whitelist"`)
        await db.query(`DROP INDEX "public"."IDX_559cd9f7c957e8ce940fc4bffa"`)
        await db.query(`DROP INDEX "public"."IDX_7e895363b4250c53c5e80731de"`)
        await db.query(`DROP TABLE "payment_method_event"`)
        await db.query(`DROP INDEX "public"."IDX_a1e56452d347c5949e794a1771"`)
        await db.query(`DROP INDEX "public"."IDX_bd7e8020f670aafc5f73eb6afb"`)
        await db.query(`DROP TABLE "collection_pricing"`)
        await db.query(`DROP INDEX "public"."IDX_18e67d0466dcb9512eb72243c7"`)
        await db.query(`DROP TABLE "token_pricing"`)
        await db.query(`DROP INDEX "public"."IDX_7721653cbf57f6053ec95e4be7"`)
        await db.query(`DROP INDEX "public"."IDX_1a55955281302031d696ab85a7"`)
        await db.query(`DROP TABLE "collection_royalty"`)
        await db.query(`DROP INDEX "public"."IDX_37c6e6dd8fcc921877cff8a825"`)
        await db.query(`DROP TABLE "trusted_channel"`)
        await db.query(`DROP INDEX "public"."IDX_a7a5e9c1a481c215ebd558c86b"`)
        await db.query(`DROP INDEX "public"."IDX_04645a2dff5a4e20c21313fb6b"`)
        await db.query(`DROP TABLE "channel_event"`)
        await db.query(`DROP INDEX "public"."IDX_87fbfba64b83e40a1ca9191a71"`)
        await db.query(`DROP INDEX "public"."IDX_dfdca62d50cf2eb326804f3f17"`)
        await db.query(`DROP TABLE "cancellation_event"`)
        await db.query(`DROP INDEX "public"."IDX_9a7557c2b285c4c078e0eeecc0"`)
        await db.query(`DROP TABLE "token_standard"`)
        await db.query(`DROP INDEX "public"."IDX_0e8d3d41b0edc7e7439206589f"`)
        await db.query(`DROP TABLE "cosigner_event"`)
        await db.query(`DROP INDEX "public"."IDX_b8624b31514a35bdea18e62ab7"`)
        await db.query(`DROP TABLE "collection_payment_settings"`)
        await db.query(`DROP INDEX "public"."IDX_6757434d1d5e63eac97bbc7ded"`)
        await db.query(`DROP TABLE "name_registered_event"`)
        await db.query(`DROP INDEX "public"."IDX_e1f6420c2f81f38dec8e9554a0"`)
        await db.query(`DROP INDEX "public"."IDX_496445d29cefe03909a6fd818d"`)
        await db.query(`DROP TABLE "name_renewed_event"`)
        await db.query(`DROP INDEX "public"."IDX_789175150c539317f4e324f040"`)
        await db.query(`DROP TABLE "discount_applied_event"`)
        await db.query(`DROP TABLE "eth_payment_processed_event"`)
        await db.query(`DROP INDEX "public"."IDX_ce18881b2f9e29fcd50464baf0"`)
        await db.query(`DROP TABLE "discount_details"`)
        await db.query(`DROP TABLE "discount_updated_event"`)
        await db.query(`DROP INDEX "public"."IDX_f548a19cc679afe132bd7be92a"`)
        await db.query(`DROP TABLE "price_oracle_updated_event"`)
        await db.query(`DROP TABLE "reverse_registrar_updated_event"`)
        await db.query(`DROP TABLE "payment_receiver_updated_event"`)
        await db.query(`ALTER TABLE "discount_updated_event" DROP CONSTRAINT "FK_f548a19cc679afe132bd7be92a6"`)
    }
}
